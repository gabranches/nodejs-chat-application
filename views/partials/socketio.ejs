<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script> 

    <script>
      var client = {};
      client.room = '<%= locals.room %>';
      var socket = io();

      socket.on('connect', function () { 
        socket.emit('info', client);
      });

      $('form').submit(function(){
        socket.emit('msg-to-server', '#' + client.room + ' ' + $('#message').val());
        $('#message').val('');
        return false;
      });

      socket.on('msg-to-room:' + client.room, function(msg){
        $('#chatbox').append($('<div class="message">').text('Anonymous: ' + msg));
        $("#chatbox").prop({ scrollTop: $("#chatbox").prop("scrollHeight") });
      });

      socket.on('room-status:'  + client.room, function(data){
        $('#active-users').html('Active Users: ' + data.users.length);
      });

    </script>
