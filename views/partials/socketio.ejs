<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script> 

<script>
  
  var socket = io()
  
  socket.on('connect', function () { 
    // Send client info to server
    socket.emit('info', client)
    client.socket = socket.io.engine.id
  });

  $('form').submit(function(){
    // Send message to server
    socket.emit('msg-to-server', '#' + client.room + ' ' + $('#message').val())
    printMessage($('#message').val(), true)
    $('#message').val('')
    return false
  });

  // Receive message from server
  socket.on('msg-to-room:' + client.room, function(data){
    if (data[0] !== client.socket) {
      printMessage(data[1], false)
      flashTitle(client.room)
    }
  });

  // Update room status info
  socket.on('room-status:'  + client.room, function(data){
    client.refresh = 1
    $('#active-users').html('Active Users: ' + data.users.length)
  });

</script>
