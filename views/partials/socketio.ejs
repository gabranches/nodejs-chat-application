<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script> 

<script>
  
var socket = io();

// Send client info to server
socket.on('connect', function () { 
    socket.emit('user-connect', client);
    client.socketID = socket.io.engine.id;
});

// Send message to server
$('form').submit(function(){
    client.msg = $('#message').val();
    socket.emit('msg-to-server', client);
    printMessage({sender: client.socketID, msg: client.msg});
    $('#message').val('');
    return false;
});

// Receive message from server
socket.on('msg-to-room', function(data){
    if (data.sender !== client.socketID) {
        printMessage(data);
        flashTitle(client.room);
    }
});

// Update room status info 
socket.on('room-status', function(data){
    console.log('Received room info.');
    $('#active-users').html('Active Users: ' + data.msg.users);
});

// Print recent messages
socket.on('recent-msgs', function(msgArray){
    console.log('Received recent messages.');
    if (msgArray.msg !== undefined) {
        msgArray.msg.forEach(function (data){
            printMessage(data);
        });
    }
});

</script>
